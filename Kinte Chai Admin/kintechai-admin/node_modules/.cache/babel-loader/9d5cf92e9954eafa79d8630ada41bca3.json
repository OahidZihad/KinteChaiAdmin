{"ast":null,"code":"var _jsxFileName = \"G:\\\\CSE299\\\\KinteChaiAdmin\\\\Kinte Chai Admin\\\\kintechai-admin\\\\src\\\\Pages\\\\login.js\";\nimport React, { Component } from \"react\";\nimport { Container, Box, Typography, TextField, CircularProgress, Button } from \"@material-ui/core\";\nimport logo from \"../media/logo.png\";\nimport { firebaseAuth, firestore } from \"../firebase\"; //import { firebaseAuth } from \"../firebase\";\n\nclass login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.login = () => {\n      let valid_data = true;\n      this.state.email_error = null;\n      this.state.password_error = null;\n\n      if (this.state.email === \"\") {\n        this.state.email_error = \"Required!\";\n        valid_data = false;\n      }\n\n      if (this.state.password === \"\") {\n        this.state.password_error = \"Required!\";\n        valid_data = false;\n      }\n\n      if (valid_data) {\n        this.state.show_progress = true;\n      }\n\n      this.setState({\n        update: true\n      });\n\n      if (valid_data) {\n        firebaseAuth.firestore().collection(\"USERS\").where(\"email\", \"==\", this.state.email).where(\"IsAdmin\", \"==\", true).get().then(querySnapshot => {\n          if (!querySnapshot.empty) {\n            firebaseAuth.signInWithEmailAndPassword(this.state.email, this.state.password).then(res => {\n              this.props.history.replace(\"/\");\n            }).catch(err => {\n              if (err.code === \"auth/wrong-password\") {\n                this.state.password_error = \"Incorrect Password!\";\n              }\n\n              this.setState({\n                show_progress: false\n              });\n            });\n          } else {\n            this.state.email_error = \"Not Allowed!\";\n            this.setState({\n              show_progress: false\n            });\n          }\n        });\n      }\n    };\n\n    this.state = {\n      email: \"\",\n      password: \"\",\n      show_progress: false\n    };\n    this.handleChange = this.handleChange.bind();\n    this.login = this.login.bind();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Container, {\n      maxWidth: \"xs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      bgcolor: \"white\",\n      boxShadow: \"10\",\n      borderRadius: \"12px\",\n      textAlign: \"center\",\n      p: \"24px\",\n      mt: \"110px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: logo,\n      height: \"80px\",\n      alt: \"50px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      color: \"textSecondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }, \"ADMIN\"), /*#__PURE__*/React.createElement(TextField, {\n      label: \"Email\",\n      id: \"outlined-size-small\",\n      variant: \"outlined\",\n      fullWidth: true,\n      name: \"email\",\n      error: this.state.email_error != null,\n      helperText: this.state.email_error,\n      onChange: this.handleChange,\n      color: \"secondary\",\n      margin: \"normal\",\n      size: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      label: \"Password\",\n      id: \"outlined-size-small\",\n      type: \"password\",\n      variant: \"outlined\",\n      fullWidth: true,\n      name: \"password\",\n      error: this.state.password_error != null,\n      helperText: this.state.password_error,\n      onChange: this.handleChange,\n      color: \"secondary\",\n      margin: \"normal\",\n      size: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }\n    }), this.state.show_progress ? /*#__PURE__*/React.createElement(CircularProgress, {\n      size: 24,\n      thickness: 4,\n      color: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }\n    }) : null, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      disableElevation: true,\n      variant: \"contained\",\n      onClick: this.login,\n      color: \"primary\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }\n    }, \"LOGIN\")));\n  }\n\n}\n\nexport default login;","map":{"version":3,"sources":["G:/CSE299/KinteChaiAdmin/Kinte Chai Admin/kintechai-admin/src/Pages/login.js"],"names":["React","Component","Container","Box","Typography","TextField","CircularProgress","Button","logo","firebaseAuth","firestore","login","constructor","props","handleChange","e","setState","target","name","value","valid_data","state","email_error","password_error","email","password","show_progress","update","collection","where","get","then","querySnapshot","empty","signInWithEmailAndPassword","res","history","replace","catch","err","code","bind","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  Container,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  CircularProgress,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport logo from \"../media/logo.png\";\r\nimport { firebaseAuth, firestore } from \"../firebase\";\r\n//import { firebaseAuth } from \"../firebase\";\r\n\r\nclass login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      email: \"\",\r\n      password: \"\",\r\n      show_progress: false,\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind();\r\n    this.login = this.login.bind();\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  login = () => {\r\n    let valid_data = true;\r\n    this.state.email_error = null;\r\n    this.state.password_error = null;\r\n\r\n    if (this.state.email === \"\") {\r\n      this.state.email_error = \"Required!\";\r\n      valid_data = false;\r\n    }\r\n    if (this.state.password === \"\") {\r\n      this.state.password_error = \"Required!\";\r\n      valid_data = false;\r\n    }\r\n\r\n    if (valid_data) {\r\n      this.state.show_progress = true;\r\n    }\r\n\r\n    this.setState({\r\n      update: true,\r\n    });\r\n\r\n    if (valid_data) {\r\n      firebaseAuth\r\n        .firestore()\r\n        .collection(\"USERS\")\r\n        .where(\"email\", \"==\", this.state.email)\r\n        .where(\"IsAdmin\", \"==\", true)\r\n        .get()\r\n        .then((querySnapshot) => {\r\n          if (!querySnapshot.empty) {\r\n            firebaseAuth\r\n              .signInWithEmailAndPassword(this.state.email, this.state.password)\r\n              .then((res) => {\r\n                this.props.history.replace(\"/\");\r\n              })\r\n              .catch((err) => {\r\n                if (err.code === \"auth/wrong-password\") {\r\n                  this.state.password_error = \"Incorrect Password!\";\r\n                }\r\n                this.setState({\r\n                  show_progress: false,\r\n                });\r\n              });\r\n          } else {\r\n            this.state.email_error = \"Not Allowed!\";\r\n            this.setState({\r\n              show_progress: false,\r\n            });\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Container maxWidth=\"xs\">\r\n        <Box\r\n          bgcolor=\"white\"\r\n          boxShadow=\"10\"\r\n          borderRadius=\"12px\"\r\n          textAlign=\"center\"\r\n          p=\"24px\"\r\n          mt=\"110px\"\r\n        >\r\n          <img src={logo} height=\"80px\" alt=\"50px\" />\r\n          <Typography variant=\"h5\" color=\"textSecondary\">\r\n            ADMIN\r\n          </Typography>\r\n          <TextField\r\n            label=\"Email\"\r\n            id=\"outlined-size-small\"\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            name=\"email\"\r\n            error={this.state.email_error != null}\r\n            helperText={this.state.email_error}\r\n            onChange={this.handleChange}\r\n            color=\"secondary\"\r\n            margin=\"normal\"\r\n            size=\"small\"\r\n          />\r\n\r\n          <TextField\r\n            label=\"Password\"\r\n            id=\"outlined-size-small\"\r\n            type=\"password\"\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            name=\"password\"\r\n            error={this.state.password_error != null}\r\n            helperText={this.state.password_error}\r\n            onChange={this.handleChange}\r\n            color=\"secondary\"\r\n            margin=\"normal\"\r\n            size=\"small\"\r\n          />\r\n          <br />\r\n          <br />\r\n          {this.state.show_progress ? (\r\n            <CircularProgress size={24} thickness={4} color=\"secondary\" />\r\n          ) : null}\r\n          <br />\r\n          <br />\r\n          <Button\r\n            disableElevation\r\n            variant=\"contained\"\r\n            onClick={this.login}\r\n            color=\"primary\"\r\n            fullWidth\r\n          >\r\n            LOGIN\r\n          </Button>\r\n        </Box>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default login;\r\n"]},"metadata":{},"sourceType":"module"}